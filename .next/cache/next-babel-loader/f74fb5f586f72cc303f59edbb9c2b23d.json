{"ast":null,"code":"import React, { Fragment } from \"react\";\nimport { useAuth } from \"../../contexts/AuthContext\";\nimport Head from \"next/head\";\nimport Nav from \"../../components/nav\";\nimport { getServerSideCookie } from \"../../utils/serverSideStorage\";\nimport Footer from \"../../components/footer\";\nimport { getOrders } from \"../../api\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nconst OrderItems = ({\n  items\n}) => {\n  return items.map((item, index) => /*#__PURE__*/_jsxs(\"div\", {\n    className: \"item-block\",\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      className: \"name\",\n      children: item.product.name\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      children: [\"Price: $\", item.product.price]\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      children: [\"Quantity: \", item.quantity]\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      children: [\"Total: $\", item.total_amount]\n    })]\n  }, index));\n};\n\nconst MyOrders = ({\n  orders\n}) => {\n  const {\n    authenticated\n  } = useAuth();\n\n  if (!authenticated) {\n    return /*#__PURE__*/_jsxs(Fragment, {\n      children: [/*#__PURE__*/_jsxs(Head, {\n        children: [/*#__PURE__*/_jsx(\"title\", {\n          children: \"My orders\"\n        }), /*#__PURE__*/_jsx(\"link\", {\n          rel: \"icon\",\n          href: \"/favicon.ico\"\n        })]\n      }), /*#__PURE__*/_jsx(Nav, {}), /*#__PURE__*/_jsx(\"section\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"app-page-container\",\n          children: /*#__PURE__*/_jsxs(\"div\", {\n            className: \"info-container\",\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: \"login-required\"\n            }), /*#__PURE__*/_jsx(\"h3\", {\n              className: \"text-center\",\n              children: \"Please login to continue.\"\n            })]\n          })\n        })\n      })]\n    });\n  }\n\n  return /*#__PURE__*/_jsxs(Fragment, {\n    children: [/*#__PURE__*/_jsxs(Head, {\n      children: [/*#__PURE__*/_jsx(\"title\", {\n        children: \"My orders\"\n      }), /*#__PURE__*/_jsx(\"link\", {\n        rel: \"icon\",\n        href: \"/favicon.ico\"\n      })]\n    }), /*#__PURE__*/_jsx(Nav, {}), /*#__PURE__*/_jsx(\"section\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsx(\"div\", {\n        className: \"app-page-container\",\n        children: /*#__PURE__*/_jsxs(\"div\", {\n          className: \"my-orders-container\",\n          children: [/*#__PURE__*/_jsx(\"h4\", {\n            className: \"title\",\n            children: \"My Orders\"\n          }), /*#__PURE__*/_jsx(\"div\", {\n            className: \"my-orders-list\",\n            children: orders.map((item, index) => /*#__PURE__*/_jsxs(\"div\", {\n              className: \"card order-details\",\n              children: [/*#__PURE__*/_jsxs(\"div\", {\n                className: \"order-info\",\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  className: \"id\",\n                  children: item._id\n                }), /*#__PURE__*/_jsxs(\"div\", {\n                  children: [/*#__PURE__*/_jsxs(\"span\", {\n                    className: \"amount\",\n                    style: {\n                      padding: \"0 2rem\"\n                    },\n                    children: [\"$\", item.total_amount]\n                  }), /*#__PURE__*/_jsx(\"span\", {\n                    className: \"badge\",\n                    children: item.status\n                  })]\n                })]\n              }), /*#__PURE__*/_jsxs(\"div\", {\n                className: \"order-items\",\n                children: [/*#__PURE__*/_jsx(\"div\", {\n                  className: \"title\",\n                  children: \"Items\"\n                }), /*#__PURE__*/_jsx(\"div\", {\n                  className: \"items-list\",\n                  children: /*#__PURE__*/_jsx(OrderItems, {\n                    items: item.items\n                  })\n                })]\n              })]\n            }, index))\n          })]\n        })\n      })\n    }), /*#__PURE__*/_jsx(Footer, {})]\n  });\n};\n\nexport default MyOrders;\nexport const getServerSideProps = async context => {\n  const token = getServerSideCookie(context)(\"token\");\n\n  try {\n    const orders = await getOrders(token)();\n    return {\n      props: {\n        orders\n      }\n    };\n  } catch (e) {\n    console.log(\"error\", e.message);\n  }\n\n  return {\n    props: {\n      orders: []\n    }\n  };\n};","map":null,"metadata":{},"sourceType":"module"}