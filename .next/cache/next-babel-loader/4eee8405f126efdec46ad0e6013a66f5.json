{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nvar _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$(),\n    _s4 = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { createContext, useContext, useReducer } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { getItem, setItem } from \"../utils/localStorage\";\nvar CartStateContext = /*#__PURE__*/createContext();\nvar CartDispatchContext = /*#__PURE__*/createContext();\nvar ID_KEY = \"_id\";\n\nvar calculateTotal = function calculateTotal(items) {\n  var key = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"total_amount\";\n  if (items.length === 0) return 0;\n  return items.map(function (item) {\n    return item[key];\n  }).reduce(function (t, i) {\n    return t + i;\n  }, 0);\n};\n\nvar CartProvider = function CartProvider(_ref) {\n  _s();\n\n  var children = _ref.children;\n\n  var _useReducer = useReducer(function (state, action) {\n    switch (action.type) {\n      case \"ADD_CART_ITEM\":\n        if (!state.items.find(function (item) {\n          return item[ID_KEY] === action.payload.item[ID_KEY];\n        })) state.items.push(action.payload.item);\n        break;\n\n      case \"UPDATE_CART_ITEM\":\n        state.items = state.items.map(function (item) {\n          if (item[ID_KEY] === action.payload.id) return _objectSpread(_objectSpread({}, item), action.payload.item);\n          return item;\n        });\n        break;\n\n      case \"REMOVE_CART_ITEM\":\n        state.items = state.items.filter(function (item) {\n          return item[ID_KEY] !== action.payload.id;\n        });\n        break;\n\n      case \"SET_SHIPPING_ADDRESS_ID\":\n        state.shipping_address_id = action.payload.shipping_address_id;\n        break;\n\n      case \"CLEAR_CART\":\n        state.items = [];\n        state.shipping_address_id = null;\n        break;\n\n      default:\n        throw new Error(\"undefined action type used\");\n    }\n\n    state.total_amount = calculateTotal(state.items, \"total_amount\");\n    setItem(\"cart\", JSON.stringify(state));\n    return _objectSpread(_objectSpread({}, state), {}, {\n      items: _toConsumableArray(state.items)\n    });\n  }, JSON.parse(getItem(\"cart\") || null) || {\n    items: [],\n    total_amount: 0,\n    shipping_address_id: null\n  }),\n      state = _useReducer[0],\n      dispatch = _useReducer[1];\n\n  return /*#__PURE__*/_jsx(CartStateContext.Provider, {\n    value: state,\n    children: /*#__PURE__*/_jsx(CartDispatchContext.Provider, {\n      value: dispatch,\n      children: children\n    })\n  });\n};\n\n_s(CartProvider, \"7Yk2lAc0e5Poc1dTOral3xQP9s8=\");\n\n_c = CartProvider;\nCartProvider.propTypes = {\n  children: PropTypes.element.isRequired\n};\nexport default CartProvider;\nexport var useCartState = function useCartState() {\n  _s2();\n\n  var context = useContext(CartStateContext);\n\n  if (context === undefined) {\n    throw new Error(\"useCartStateContext must be used within a CartProvider\");\n  }\n\n  return context;\n};\n\n_s2(useCartState, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n\nexport var useCartDispatchContext = function useCartDispatchContext() {\n  _s3();\n\n  var context = useContext(CartDispatchContext);\n\n  if (context === undefined) {\n    throw new Error(\"useCartDispatchContext must be used within a CartProvider\");\n  }\n\n  return context;\n};\n\n_s3(useCartDispatchContext, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n\nexport var useCartActions = function useCartActions() {\n  _s4();\n\n  var state = useCartState();\n  var dispatch = useCartDispatchContext();\n\n  var findItem = function findItem(id) {\n    return state.items.find(function (item) {\n      return item[ID_KEY] === id;\n    });\n  };\n\n  var countItem = function countItem() {\n    return state.items.length;\n  };\n\n  var addItem = function addItem(item) {\n    dispatch({\n      type: \"ADD_CART_ITEM\",\n      payload: {\n        item: item\n      }\n    });\n  };\n\n  var updateItem = function updateItem(id, item) {\n    dispatch({\n      type: \"UPDATE_CART_ITEM\",\n      payload: {\n        id: id,\n        item: item\n      }\n    });\n  };\n\n  var removeItem = function removeItem(id) {\n    dispatch({\n      type: \"REMOVE_CART_ITEM\",\n      payload: {\n        id: id\n      }\n    });\n  };\n\n  var setShippingAddressId = function setShippingAddressId(id) {\n    dispatch({\n      type: \"SET_SHIPPING_ADDRESS_ID\",\n      payload: {\n        shipping_address_id: id\n      }\n    });\n  };\n\n  var clearCart = function clearCart() {\n    dispatch({\n      type: \"CLEAR_CART\",\n      payload: null\n    });\n  };\n\n  return {\n    findItem: findItem,\n    countItem: countItem,\n    addItem: addItem,\n    updateItem: updateItem,\n    removeItem: removeItem,\n    setShippingAddressId: setShippingAddressId,\n    clearCart: clearCart\n  };\n};\n\n_s4(useCartActions, \"vbgij8GLPYEal63DQmk9hTarKZw=\", false, function () {\n  return [useCartState, useCartDispatchContext];\n});\n\nvar _c;\n\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"sources":["/media/zoro/plus/Workspace/creation_arts/creation-arts/contexts/CartContext.js"],"names":["React","createContext","useContext","useReducer","PropTypes","getItem","setItem","CartStateContext","CartDispatchContext","ID_KEY","calculateTotal","items","key","length","map","item","reduce","t","i","CartProvider","children","state","action","type","find","payload","push","id","filter","shipping_address_id","Error","total_amount","JSON","stringify","parse","dispatch","propTypes","element","isRequired","useCartState","context","undefined","useCartDispatchContext","useCartActions","findItem","countItem","addItem","updateItem","removeItem","setShippingAddressId","clearCart"],"mappings":";;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,aAAhB,EAA+BC,UAA/B,EAA2CC,UAA3C,QAA6D,OAA7D;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,OAAT,EAAkBC,OAAlB,QAAiC,uBAAjC;AAEA,IAAMC,gBAAgB,gBAAGN,aAAa,EAAtC;AACA,IAAMO,mBAAmB,gBAAGP,aAAa,EAAzC;AAEA,IAAMQ,MAAM,GAAG,KAAf;;AAEA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAACC,KAAD,EAAiC;AAAA,MAAzBC,GAAyB,uEAAnB,cAAmB;AACtD,MAAID,KAAK,CAACE,MAAN,KAAiB,CAArB,EAAwB,OAAO,CAAP;AACxB,SAAOF,KAAK,CAACG,GAAN,CAAU,UAACC,IAAD;AAAA,WAAUA,IAAI,CAACH,GAAD,CAAd;AAAA,GAAV,EAA+BI,MAA/B,CAAsC,UAACC,CAAD,EAAIC,CAAJ;AAAA,WAAUD,CAAC,GAAGC,CAAd;AAAA,GAAtC,EAAuD,CAAvD,CAAP;AACD,CAHD;;AAKA,IAAMC,YAAY,GAAG,SAAfA,YAAe,OAAkB;AAAA;;AAAA,MAAfC,QAAe,QAAfA,QAAe;;AAAA,oBACXjB,UAAU,CAClC,UAACkB,KAAD,EAAQC,MAAR,EAAmB;AACjB,YAAQA,MAAM,CAACC,IAAf;AACE,WAAK,eAAL;AACE,YACE,CAACF,KAAK,CAACV,KAAN,CAAYa,IAAZ,CACC,UAACT,IAAD;AAAA,iBAAUA,IAAI,CAACN,MAAD,CAAJ,KAAiBa,MAAM,CAACG,OAAP,CAAeV,IAAf,CAAoBN,MAApB,CAA3B;AAAA,SADD,CADH,EAKEY,KAAK,CAACV,KAAN,CAAYe,IAAZ,CAAiBJ,MAAM,CAACG,OAAP,CAAeV,IAAhC;AACF;;AACF,WAAK,kBAAL;AACEM,QAAAA,KAAK,CAACV,KAAN,GAAcU,KAAK,CAACV,KAAN,CAAYG,GAAZ,CAAgB,UAACC,IAAD,EAAU;AACtC,cAAIA,IAAI,CAACN,MAAD,CAAJ,KAAiBa,MAAM,CAACG,OAAP,CAAeE,EAApC,EACE,uCAAYZ,IAAZ,GAAqBO,MAAM,CAACG,OAAP,CAAeV,IAApC;AACF,iBAAOA,IAAP;AACD,SAJa,CAAd;AAKA;;AACF,WAAK,kBAAL;AACEM,QAAAA,KAAK,CAACV,KAAN,GAAcU,KAAK,CAACV,KAAN,CAAYiB,MAAZ,CACZ,UAACb,IAAD;AAAA,iBAAUA,IAAI,CAACN,MAAD,CAAJ,KAAiBa,MAAM,CAACG,OAAP,CAAeE,EAA1C;AAAA,SADY,CAAd;AAGA;;AACF,WAAK,yBAAL;AACEN,QAAAA,KAAK,CAACQ,mBAAN,GAA4BP,MAAM,CAACG,OAAP,CAAeI,mBAA3C;AACA;;AACF,WAAK,YAAL;AACER,QAAAA,KAAK,CAACV,KAAN,GAAc,EAAd;AACAU,QAAAA,KAAK,CAACQ,mBAAN,GAA4B,IAA5B;AACA;;AACF;AACE,cAAM,IAAIC,KAAJ,CAAU,4BAAV,CAAN;AA7BJ;;AA+BAT,IAAAA,KAAK,CAACU,YAAN,GAAqBrB,cAAc,CAACW,KAAK,CAACV,KAAP,EAAc,cAAd,CAAnC;AAEAL,IAAAA,OAAO,CAAC,MAAD,EAAS0B,IAAI,CAACC,SAAL,CAAeZ,KAAf,CAAT,CAAP;AACA,2CAAYA,KAAZ;AAAmBV,MAAAA,KAAK,qBAAMU,KAAK,CAACV,KAAZ;AAAxB;AACD,GArCiC,EAsClCqB,IAAI,CAACE,KAAL,CAAW7B,OAAO,CAAC,MAAD,CAAP,IAAmB,IAA9B,KAAuC;AACrCM,IAAAA,KAAK,EAAE,EAD8B;AAErCoB,IAAAA,YAAY,EAAE,CAFuB;AAGrCF,IAAAA,mBAAmB,EAAE;AAHgB,GAtCL,CADC;AAAA,MAC9BR,KAD8B;AAAA,MACvBc,QADuB;;AA8CrC,sBACE,KAAC,gBAAD,CAAkB,QAAlB;AAA2B,IAAA,KAAK,EAAEd,KAAlC;AAAA,2BACE,KAAC,mBAAD,CAAqB,QAArB;AAA8B,MAAA,KAAK,EAAEc,QAArC;AAAA,gBACGf;AADH;AADF,IADF;AAOD,CArDD;;GAAMD,Y;;KAAAA,Y;AAuDNA,YAAY,CAACiB,SAAb,GAAyB;AACvBhB,EAAAA,QAAQ,EAAEhB,SAAS,CAACiC,OAAV,CAAkBC;AADL,CAAzB;AAIA,eAAenB,YAAf;AAEA,OAAO,IAAMoB,YAAY,GAAG,SAAfA,YAAe,GAAM;AAAA;;AAChC,MAAMC,OAAO,GAAGtC,UAAU,CAACK,gBAAD,CAA1B;;AACA,MAAIiC,OAAO,KAAKC,SAAhB,EAA2B;AACzB,UAAM,IAAIX,KAAJ,CAAU,wDAAV,CAAN;AACD;;AACD,SAAOU,OAAP;AACD,CANM;;IAAMD,Y;;AAQb,OAAO,IAAMG,sBAAsB,GAAG,SAAzBA,sBAAyB,GAAM;AAAA;;AAC1C,MAAMF,OAAO,GAAGtC,UAAU,CAACM,mBAAD,CAA1B;;AACA,MAAIgC,OAAO,KAAKC,SAAhB,EAA2B;AACzB,UAAM,IAAIX,KAAJ,CACJ,2DADI,CAAN;AAGD;;AACD,SAAOU,OAAP;AACD,CARM;;IAAME,sB;;AAUb,OAAO,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AAAA;;AAClC,MAAMtB,KAAK,GAAGkB,YAAY,EAA1B;AACA,MAAMJ,QAAQ,GAAGO,sBAAsB,EAAvC;;AACA,MAAME,QAAQ,GAAG,SAAXA,QAAW,CAACjB,EAAD;AAAA,WAAQN,KAAK,CAACV,KAAN,CAAYa,IAAZ,CAAiB,UAACT,IAAD;AAAA,aAAUA,IAAI,CAACN,MAAD,CAAJ,KAAiBkB,EAA3B;AAAA,KAAjB,CAAR;AAAA,GAAjB;;AACA,MAAMkB,SAAS,GAAG,SAAZA,SAAY;AAAA,WAAMxB,KAAK,CAACV,KAAN,CAAYE,MAAlB;AAAA,GAAlB;;AACA,MAAMiC,OAAO,GAAG,SAAVA,OAAU,CAAC/B,IAAD,EAAU;AACxBoB,IAAAA,QAAQ,CAAC;AACPZ,MAAAA,IAAI,EAAE,eADC;AAEPE,MAAAA,OAAO,EAAE;AAAEV,QAAAA,IAAI,EAAJA;AAAF;AAFF,KAAD,CAAR;AAID,GALD;;AAOA,MAAMgC,UAAU,GAAG,SAAbA,UAAa,CAACpB,EAAD,EAAKZ,IAAL,EAAc;AAC/BoB,IAAAA,QAAQ,CAAC;AACPZ,MAAAA,IAAI,EAAE,kBADC;AAEPE,MAAAA,OAAO,EAAE;AAAEE,QAAAA,EAAE,EAAFA,EAAF;AAAMZ,QAAAA,IAAI,EAAJA;AAAN;AAFF,KAAD,CAAR;AAID,GALD;;AAOA,MAAMiC,UAAU,GAAG,SAAbA,UAAa,CAACrB,EAAD,EAAQ;AACzBQ,IAAAA,QAAQ,CAAC;AACPZ,MAAAA,IAAI,EAAE,kBADC;AAEPE,MAAAA,OAAO,EAAE;AAAEE,QAAAA,EAAE,EAAFA;AAAF;AAFF,KAAD,CAAR;AAID,GALD;;AAMA,MAAMsB,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACtB,EAAD,EAAQ;AACnCQ,IAAAA,QAAQ,CAAC;AACPZ,MAAAA,IAAI,EAAE,yBADC;AAEPE,MAAAA,OAAO,EAAE;AAAEI,QAAAA,mBAAmB,EAAEF;AAAvB;AAFF,KAAD,CAAR;AAID,GALD;;AAMA,MAAMuB,SAAS,GAAG,SAAZA,SAAY,GAAM;AACtBf,IAAAA,QAAQ,CAAC;AACPZ,MAAAA,IAAI,EAAE,YADC;AAEPE,MAAAA,OAAO,EAAE;AAFF,KAAD,CAAR;AAID,GALD;;AAOA,SAAO;AACLmB,IAAAA,QAAQ,EAARA,QADK;AAELC,IAAAA,SAAS,EAATA,SAFK;AAGLC,IAAAA,OAAO,EAAPA,OAHK;AAILC,IAAAA,UAAU,EAAVA,UAJK;AAKLC,IAAAA,UAAU,EAAVA,UALK;AAMLC,IAAAA,oBAAoB,EAApBA,oBANK;AAOLC,IAAAA,SAAS,EAATA;AAPK,GAAP;AASD,CA/CM;;IAAMP,c;UACGJ,Y,EACGG,sB","sourcesContent":["import React, { createContext, useContext, useReducer } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { getItem, setItem } from \"../utils/localStorage\";\n\nconst CartStateContext = createContext();\nconst CartDispatchContext = createContext();\n\nconst ID_KEY = \"_id\";\n\nconst calculateTotal = (items, key = \"total_amount\") => {\n  if (items.length === 0) return 0;\n  return items.map((item) => item[key]).reduce((t, i) => t + i, 0);\n};\n\nconst CartProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(\n    (state, action) => {\n      switch (action.type) {\n        case \"ADD_CART_ITEM\":\n          if (\n            !state.items.find(\n              (item) => item[ID_KEY] === action.payload.item[ID_KEY]\n            )\n          )\n            state.items.push(action.payload.item);\n          break;\n        case \"UPDATE_CART_ITEM\":\n          state.items = state.items.map((item) => {\n            if (item[ID_KEY] === action.payload.id)\n              return { ...item, ...action.payload.item };\n            return item;\n          });\n          break;\n        case \"REMOVE_CART_ITEM\":\n          state.items = state.items.filter(\n            (item) => item[ID_KEY] !== action.payload.id\n          );\n          break;\n        case \"SET_SHIPPING_ADDRESS_ID\":\n          state.shipping_address_id = action.payload.shipping_address_id;\n          break;\n        case \"CLEAR_CART\":\n          state.items = [];\n          state.shipping_address_id = null;\n          break;\n        default:\n          throw new Error(\"undefined action type used\");\n      }\n      state.total_amount = calculateTotal(state.items, \"total_amount\");\n\n      setItem(\"cart\", JSON.stringify(state));\n      return { ...state, items: [...state.items] };\n    },\n    JSON.parse(getItem(\"cart\") || null) || {\n      items: [],\n      total_amount: 0,\n      shipping_address_id: null,\n    }\n  );\n\n  return (\n    <CartStateContext.Provider value={state}>\n      <CartDispatchContext.Provider value={dispatch}>\n        {children}\n      </CartDispatchContext.Provider>\n    </CartStateContext.Provider>\n  );\n};\n\nCartProvider.propTypes = {\n  children: PropTypes.element.isRequired,\n};\n\nexport default CartProvider;\n\nexport const useCartState = () => {\n  const context = useContext(CartStateContext);\n  if (context === undefined) {\n    throw new Error(\"useCartStateContext must be used within a CartProvider\");\n  }\n  return context;\n};\n\nexport const useCartDispatchContext = () => {\n  const context = useContext(CartDispatchContext);\n  if (context === undefined) {\n    throw new Error(\n      \"useCartDispatchContext must be used within a CartProvider\"\n    );\n  }\n  return context;\n};\n\nexport const useCartActions = () => {\n  const state = useCartState();\n  const dispatch = useCartDispatchContext();\n  const findItem = (id) => state.items.find((item) => item[ID_KEY] === id);\n  const countItem = () => state.items.length;\n  const addItem = (item) => {\n    dispatch({\n      type: \"ADD_CART_ITEM\",\n      payload: { item },\n    });\n  };\n\n  const updateItem = (id, item) => {\n    dispatch({\n      type: \"UPDATE_CART_ITEM\",\n      payload: { id, item },\n    });\n  };\n\n  const removeItem = (id) => {\n    dispatch({\n      type: \"REMOVE_CART_ITEM\",\n      payload: { id },\n    });\n  };\n  const setShippingAddressId = (id) => {\n    dispatch({\n      type: \"SET_SHIPPING_ADDRESS_ID\",\n      payload: { shipping_address_id: id },\n    });\n  };\n  const clearCart = () => {\n    dispatch({\n      type: \"CLEAR_CART\",\n      payload: null,\n    });\n  };\n\n  return {\n    findItem,\n    countItem,\n    addItem,\n    updateItem,\n    removeItem,\n    setShippingAddressId,\n    clearCart,\n  };\n};\n"]},"metadata":{},"sourceType":"module"}