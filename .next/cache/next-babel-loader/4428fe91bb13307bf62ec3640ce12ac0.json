{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { createContext, useContext, useReducer } from \"react\";\nimport { getItem, removeItem, setItem } from \"../utils/localStorage\";\nimport JWTValidator from \"../utils/JWTValidator\";\nconst AuthStateContext = /*#__PURE__*/createContext();\nconst AuthDispatchContext = /*#__PURE__*/createContext();\n\nconst AuthProvider = ({\n  children\n}) => {\n  const {\n    0: state,\n    1: dispatch\n  } = useReducer((state, action) => {\n    switch (action.type) {\n      case \"LOGIN\":\n        setItem(\"token\", action.payload.token);\n        return _objectSpread(_objectSpread({}, state), {}, {\n          authenticated: true\n        });\n\n      case \"LOGOUT\":\n        removeItem(\"token\");\n        return {\n          authenticated: false\n        };\n\n      default:\n        throw new Error(\"undefined action type used\");\n    }\n  }, {\n    authenticated: !!getItem(\"token\") && JWTValidator(getItem(\"token\"))\n  });\n  return /*#__PURE__*/_jsx(AuthStateContext.Provider, {\n    value: state,\n    children: /*#__PURE__*/_jsx(AuthDispatchContext.Provider, {\n      value: dispatch,\n      children: children\n    })\n  });\n};\n\nexport default AuthProvider;\nexport const useAuthContext = () => {\n  const context = useContext(AuthStateContext);\n\n  if (context === undefined) {\n    throw new Error(\"useAuthContext must be used within a AuthProvider\");\n  }\n\n  return context;\n};\nexport const useAuthDispatch = () => {\n  const context = useContext(AuthDispatchContext);\n\n  if (context === undefined) {\n    throw new Error(\"useAuthDispatch must be used within a AuthProvider\");\n  }\n\n  return context;\n};\nexport const useAuth = () => {\n  const authContext = useAuthContext();\n  const authDispatch = useAuthDispatch();\n\n  const login = token => {\n    authDispatch({\n      type: \"LOGIN\",\n      payload: {\n        token\n      }\n    });\n  };\n\n  const logout = () => {\n    authDispatch({\n      type: \"LOGOUT\",\n      payload: null\n    });\n  };\n\n  return {\n    authenticated: authContext.authenticated,\n    login,\n    logout\n  };\n};","map":{"version":3,"sources":["/media/zoro/plus/Workspace/creation_arts/creation-arts/contexts/AuthContext.js"],"names":["React","createContext","useContext","useReducer","getItem","removeItem","setItem","JWTValidator","AuthStateContext","AuthDispatchContext","AuthProvider","children","state","dispatch","action","type","payload","token","authenticated","Error","useAuthContext","context","undefined","useAuthDispatch","useAuth","authContext","authDispatch","login","logout"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,aAAhB,EAA+BC,UAA/B,EAA2CC,UAA3C,QAA6D,OAA7D;AACA,SAASC,OAAT,EAAkBC,UAAlB,EAA8BC,OAA9B,QAA6C,uBAA7C;AACA,OAAOC,YAAP,MAAyB,uBAAzB;AAEA,MAAMC,gBAAgB,gBAAGP,aAAa,EAAtC;AACA,MAAMQ,mBAAmB,gBAAGR,aAAa,EAAzC;;AAEA,MAAMS,YAAY,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAkB;AACrC,QAAM;AAAA,OAACC,KAAD;AAAA,OAAQC;AAAR,MAAoBV,UAAU,CAClC,CAACS,KAAD,EAAQE,MAAR,KAAmB;AACjB,YAAQA,MAAM,CAACC,IAAf;AACE,WAAK,OAAL;AACET,QAAAA,OAAO,CAAC,OAAD,EAAUQ,MAAM,CAACE,OAAP,CAAeC,KAAzB,CAAP;AACA,+CAAYL,KAAZ;AAAmBM,UAAAA,aAAa,EAAE;AAAlC;;AACF,WAAK,QAAL;AACEb,QAAAA,UAAU,CAAC,OAAD,CAAV;AACA,eAAO;AAAEa,UAAAA,aAAa,EAAE;AAAjB,SAAP;;AACF;AACE,cAAM,IAAIC,KAAJ,CAAU,4BAAV,CAAN;AARJ;AAUD,GAZiC,EAalC;AAAED,IAAAA,aAAa,EAAE,CAAC,CAACd,OAAO,CAAC,OAAD,CAAT,IAAsBG,YAAY,CAACH,OAAO,CAAC,OAAD,CAAR;AAAnD,GAbkC,CAApC;AAgBA,sBACE,KAAC,gBAAD,CAAkB,QAAlB;AAA2B,IAAA,KAAK,EAAEQ,KAAlC;AAAA,2BACE,KAAC,mBAAD,CAAqB,QAArB;AAA8B,MAAA,KAAK,EAAEC,QAArC;AAAA,gBACGF;AADH;AADF,IADF;AAOD,CAxBD;;AA0BA,eAAeD,YAAf;AAEA,OAAO,MAAMU,cAAc,GAAG,MAAM;AAClC,QAAMC,OAAO,GAAGnB,UAAU,CAACM,gBAAD,CAA1B;;AACA,MAAIa,OAAO,KAAKC,SAAhB,EAA2B;AACzB,UAAM,IAAIH,KAAJ,CAAU,mDAAV,CAAN;AACD;;AACD,SAAOE,OAAP;AACD,CANM;AAQP,OAAO,MAAME,eAAe,GAAG,MAAM;AACnC,QAAMF,OAAO,GAAGnB,UAAU,CAACO,mBAAD,CAA1B;;AACA,MAAIY,OAAO,KAAKC,SAAhB,EAA2B;AACzB,UAAM,IAAIH,KAAJ,CAAU,oDAAV,CAAN;AACD;;AACD,SAAOE,OAAP;AACD,CANM;AAQP,OAAO,MAAMG,OAAO,GAAG,MAAM;AAC3B,QAAMC,WAAW,GAAGL,cAAc,EAAlC;AACA,QAAMM,YAAY,GAAGH,eAAe,EAApC;;AAEA,QAAMI,KAAK,GAAIV,KAAD,IAAW;AACvBS,IAAAA,YAAY,CAAC;AAAEX,MAAAA,IAAI,EAAE,OAAR;AAAiBC,MAAAA,OAAO,EAAE;AAAEC,QAAAA;AAAF;AAA1B,KAAD,CAAZ;AACD,GAFD;;AAGA,QAAMW,MAAM,GAAG,MAAM;AACnBF,IAAAA,YAAY,CAAC;AAAEX,MAAAA,IAAI,EAAE,QAAR;AAAkBC,MAAAA,OAAO,EAAE;AAA3B,KAAD,CAAZ;AACD,GAFD;;AAIA,SAAO;AAAEE,IAAAA,aAAa,EAAEO,WAAW,CAACP,aAA7B;AAA4CS,IAAAA,KAA5C;AAAmDC,IAAAA;AAAnD,GAAP;AACD,CAZM","sourcesContent":["import React, { createContext, useContext, useReducer } from \"react\";\nimport { getItem, removeItem, setItem } from \"../utils/localStorage\";\nimport JWTValidator from \"../utils/JWTValidator\";\n\nconst AuthStateContext = createContext();\nconst AuthDispatchContext = createContext();\n\nconst AuthProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(\n    (state, action) => {\n      switch (action.type) {\n        case \"LOGIN\":\n          setItem(\"token\", action.payload.token);\n          return { ...state, authenticated: true };\n        case \"LOGOUT\":\n          removeItem(\"token\");\n          return { authenticated: false };\n        default:\n          throw new Error(\"undefined action type used\");\n      }\n    },\n    { authenticated: !!getItem(\"token\") && JWTValidator(getItem(\"token\")) }\n  );\n\n  return (\n    <AuthStateContext.Provider value={state}>\n      <AuthDispatchContext.Provider value={dispatch}>\n        {children}\n      </AuthDispatchContext.Provider>\n    </AuthStateContext.Provider>\n  );\n};\n\nexport default AuthProvider;\n\nexport const useAuthContext = () => {\n  const context = useContext(AuthStateContext);\n  if (context === undefined) {\n    throw new Error(\"useAuthContext must be used within a AuthProvider\");\n  }\n  return context;\n};\n\nexport const useAuthDispatch = () => {\n  const context = useContext(AuthDispatchContext);\n  if (context === undefined) {\n    throw new Error(\"useAuthDispatch must be used within a AuthProvider\");\n  }\n  return context;\n};\n\nexport const useAuth = () => {\n  const authContext = useAuthContext();\n  const authDispatch = useAuthDispatch();\n\n  const login = (token) => {\n    authDispatch({ type: \"LOGIN\", payload: { token } });\n  };\n  const logout = () => {\n    authDispatch({ type: \"LOGOUT\", payload: null });\n  };\n\n  return { authenticated: authContext.authenticated, login, logout };\n};\n"]},"metadata":{},"sourceType":"module"}